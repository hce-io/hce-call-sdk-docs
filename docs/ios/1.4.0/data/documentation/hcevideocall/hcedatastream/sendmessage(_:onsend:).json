{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"sendMessage"},{"kind":"text","text":"("},{"kind":"externalParam","text":"_"},{"kind":"text","text":" "},{"kind":"internalParam","text":"message"},{"kind":"text","text":": "},{"kind":"typeIdentifier","identifier":"doc:\/\/io.hce.HceVideoCall\/documentation\/HceVideoCall\/HceDataStream","preciseIdentifier":"s:12HceVideoCall0A10DataStreamC","text":"HceDataStream"},{"kind":"text","text":"."},{"kind":"typeIdentifier","identifier":"doc:\/\/io.hce.HceVideoCall\/documentation\/HceVideoCall\/HceDataStream\/Message","preciseIdentifier":"s:12HceVideoCall0A10DataStreamC7MessageC","text":"Message"},{"kind":"text","text":", "},{"kind":"externalParam","text":"onSend"},{"kind":"text","text":": "},{"kind":"typeIdentifier","identifier":"doc:\/\/io.hce.HceVideoCall\/documentation\/HceVideoCall\/HceDataStream\/ErrorHandler","preciseIdentifier":"s:12HceVideoCall0A10DataStreamC12ErrorHandlera","text":"ErrorHandler"},{"kind":"text","text":"? = nil)"}],"languages":["swift"],"platforms":["iOS"]}]},{"kind":"content","content":[{"anchor":"return-value","level":2,"type":"heading","text":"Return Value"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Throws HceCall.SDKError.failedToSendData when error occurs. Detail description included."}]}]},{"kind":"content","content":[{"anchor":"discussion","level":2,"type":"heading","text":"Discussion"},{"type":"paragraph","inlineContent":[{"type":"text","text":"It can be accessed through getDataStream() method of HceCall, and can be used to send\/receive data."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The localUserSessionId can be acquired from the callSessionLocalUserJoined:localUserSessionId:localUserId() callback."},{"type":"text","text":" "},{"type":"text","text":"The HceDataStream object acquired from getDataStream() method can be used to send\/receive data but its usability depends on the user’s connection status to the call."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"More specifically, the object can be used to send\/receive data after receiving “open” property from an onState callback."},{"type":"text","text":" "},{"type":"text","text":"The HceDataStream object is valid when the local user session is valid, so its lifecycle is from the local user’s “Join” to “Leave”."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"After joining a call, the local user may acquire the HceDataStream object."},{"type":"text","text":" "},{"type":"text","text":"After receiving “open”, the object can be used to send\/receive data."},{"type":"text","text":" "},{"type":"text","text":"After leaving a call, the stream becomes closed and the object becomes unusable."},{"type":"text","text":" "},{"type":"text","text":"The maximum Data transmission size limit can be found on Documentation (https:\/\/docs.hce.io) FAQ page."}]},{"type":"aside","style":"important","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Messages can’t be received on version before v1.2.3 when the message is sent using this interface."}]}]},{"anchor":"example","level":2,"type":"heading","text":"example"},{"type":"codeListing","syntax":null,"code":["extension ViewController: HceCallSessionDelegate","    func callSessionLocalUserJoined(localUserSessionId: String, localUserId: String) {","        createDataChannel(localUserSessionId: localUserSessionId)","    }","}","","extension VideoCallViewController: HceDataStreamMessageDelegate {","    func dataStreamReceivedMessage(dataStream: HceDataStream, message: HceDataStream.Message) {","        print(message.content)","        \/\/ process message","    }","","    func dataStreamStateDidChange(dataStream: HceDataStream, state: HceDataStream.State) {","        switch state {","            case .open:","                print(\"HceDataStream OPEN\")","            case .closed:","                print(\"HceDataStream CLOSED\")","            @unknown default:","                print(\"HceDataStream unknown state\")","        }","    }","}","","func createDataChannel(localUserSessionId: String) {","    guard let dataStream = engine.getDataStream(localUserSessionId: localUserSessionId) else {","        return","    }","    dataStream.delegate = self","    self.dataStream = dataStream","}","","func sendMessage(content: String) {","    guard let dataStream = dataStream,","          let localUserSessionId = localUserSessionId else {","        return","    }","    let message = HceDataStream.Message(content)","    dataStream.sendMessage(message) { error in","        if case .failedToSendData(let message) = error {","            \/\/ error processing","        }","    }","}","","let content: String = ...","sendMessage(content: content)"]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/hcevideocall\/hcedatastream\/sendmessage(_:onsend:)"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/io.hce.HceVideoCall\/documentation\/HceVideoCall\/HceDataStream\/sendMessage(_:onSend:)","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"An object that can be used to send\/receive data between call participants."}],"kind":"symbol","metadata":{"role":"symbol","title":"sendMessage(_:onSend:)","roleHeading":"Instance Method","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"sendMessage"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"HceDataStream","preciseIdentifier":"s:12HceVideoCall0A10DataStreamC"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Message","preciseIdentifier":"s:12HceVideoCall0A10DataStreamC7MessageC"},{"kind":"text","text":", "},{"kind":"externalParam","text":"onSend"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ErrorHandler","preciseIdentifier":"s:12HceVideoCall0A10DataStreamC12ErrorHandlera"},{"kind":"text","text":"?)"}],"symbolKind":"method","externalID":"s:12HceVideoCall0A10DataStreamC11sendMessage_6onSendyAC0G0C_yAA0aC0C8SDKErrorOSgcSgtF","extendedModule":"HceVideoCall","modules":[{"name":"HceVideoCall"}]},"hierarchy":{"paths":[["doc:\/\/io.hce.HceVideoCall\/documentation\/HceVideoCall","doc:\/\/io.hce.HceVideoCall\/documentation\/HceVideoCall\/HceDataStream"]]},"references":{"doc://io.hce.HceVideoCall/documentation/HceVideoCall/HceDataStream/ErrorHandler":{"role":"symbol","title":"HceDataStream.ErrorHandler","fragments":[{"kind":"keyword","text":"typealias"},{"kind":"text","text":" "},{"kind":"identifier","text":"ErrorHandler"}],"abstract":[],"identifier":"doc:\/\/io.hce.HceVideoCall\/documentation\/HceVideoCall\/HceDataStream\/ErrorHandler","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ErrorHandler"}],"url":"\/documentation\/hcevideocall\/hcedatastream\/errorhandler"},"doc://io.hce.HceVideoCall/documentation/HceVideoCall/HceDataStream":{"role":"symbol","title":"HceDataStream","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"HceDataStream"}],"abstract":[{"type":"text","text":"An object that can be used to send\/receive data between call participants."}],"identifier":"doc:\/\/io.hce.HceVideoCall\/documentation\/HceVideoCall\/HceDataStream","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"HceDataStream"}],"url":"\/documentation\/hcevideocall\/hcedatastream"},"doc://io.hce.HceVideoCall/documentation/HceVideoCall/HceDataStream/Message":{"role":"symbol","title":"HceDataStream.Message","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Message"}],"abstract":[{"type":"text","text":"An object representing messages sent\/received through the HCEDataStream."}],"identifier":"doc:\/\/io.hce.HceVideoCall\/documentation\/HceVideoCall\/HceDataStream\/Message","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Message"}],"url":"\/documentation\/hcevideocall\/hcedatastream\/message"},"doc://io.hce.HceVideoCall/documentation/HceVideoCall/HceDataStream/sendMessage(_:onSend:)":{"role":"symbol","title":"sendMessage(_:onSend:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"sendMessage"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"HceDataStream","preciseIdentifier":"s:12HceVideoCall0A10DataStreamC"},{"kind":"text","text":"."},{"kind":"typeIdentifier","text":"Message","preciseIdentifier":"s:12HceVideoCall0A10DataStreamC7MessageC"},{"kind":"text","text":", "},{"kind":"externalParam","text":"onSend"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"ErrorHandler","preciseIdentifier":"s:12HceVideoCall0A10DataStreamC12ErrorHandlera"},{"kind":"text","text":"?)"}],"abstract":[{"type":"text","text":"An object that can be used to send\/receive data between call participants."}],"identifier":"doc:\/\/io.hce.HceVideoCall\/documentation\/HceVideoCall\/HceDataStream\/sendMessage(_:onSend:)","kind":"symbol","type":"topic","url":"\/documentation\/hcevideocall\/hcedatastream\/sendmessage(_:onsend:)"},"doc://io.hce.HceVideoCall/documentation/HceVideoCall":{"role":"collection","title":"HceVideoCall","abstract":[],"identifier":"doc:\/\/io.hce.HceVideoCall\/documentation\/HceVideoCall","kind":"symbol","type":"topic","url":"\/documentation\/hcevideocall"}}}